# .env.example
# ============================================================================
# Пример файла конфигурации для Telegram-бота управления складом
# Производство краски и шпатлевки
# ============================================================================
#
# ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ:
# 1. Скопируйте этот файл: cp .env.example .env
# 2. Замените все значения YOUR_* на реальные
# 3. Настройте параметры под ваше окружение
# 4. НЕ коммитьте .env в git (он в .gitignore)
#
# ============================================================================

# ============================================================================
# TELEGRAM BOT CONFIGURATION
# ============================================================================

# Токен бота от @BotFather (ОБЯЗАТЕЛЬНО)
# Получить: https://t.me/BotFather -> /newbot
BOT_TOKEN=YOUR_BOT_TOKEN_FROM_BOTFATHER

# ID администраторов (через запятую, без пробелов)
# Получить свой ID: https://t.me/userinfobot
# Администраторы имеют полный доступ ко всем функциям
ADMIN_IDS=123456789,987654321

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Полный URL подключения к PostgreSQL
# Формат: postgresql+asyncpg://user:password@host:port/database
# Для Docker Compose: postgresql+asyncpg://warehouse_user:warehouse_pass@postgres:5432/warehouse_db
DATABASE_URL=postgresql+asyncpg://warehouse_user:warehouse_pass@localhost:5432/warehouse_db

# Или раздельные параметры (если не используете DATABASE_URL):
DB_HOST=localhost
DB_PORT=5432
DB_NAME=warehouse_db
DB_USER=warehouse_user
DB_PASSWORD=warehouse_pass

# Настройки пула соединений
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Окружение: development, production, test
APP_ENV=development

# Название приложения
APP_NAME=Warehouse Management System

# Версия приложения
APP_VERSION=1.0.0

# Часовой пояс (для корректного отображения времени)
# Список: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TIMEZONE=Europe/Moscow

# Язык по умолчанию
DEFAULT_LANGUAGE=ru

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Уровень логирования: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Директория для хранения логов
LOG_DIR=./logs

# ============================================================================
# BUSINESS LOGIC SETTINGS
# ============================================================================

# Минимальное количество для предупреждения о низких остатках
MIN_STOCK_ALERT=10.0

# Срок годности сырья по умолчанию (дни)
DEFAULT_EXPIRY_DAYS=365

# Процент выхода готовой продукции по умолчанию (50-100)
DEFAULT_YIELD_PERCENT=95.0

# Максимальное количество компонентов в рецепте
MAX_RECIPE_COMPONENTS=20

# ============================================================================
# VALIDATION SETTINGS
# ============================================================================

# Максимальная длина названий
MAX_NAME_LENGTH=200

# Максимальная длина описаний
MAX_DESCRIPTION_LENGTH=1000

# Минимальное значение для количества
MIN_QUANTITY=0.001

# Максимальное значение для количества
MAX_QUANTITY=999999.999

# Точность для decimal полей (знаков после запятой)
DECIMAL_PRECISION=3

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Секретный ключ для подписи данных (генерируйте уникальный!)
# Генерация: openssl rand -hex 32
SECRET_KEY=YOUR_SECRET_KEY_GENERATE_WITH_OPENSSL_RAND_HEX_32

# Включить проверку подписи callback данных
ENABLE_CALLBACK_SIGNATURE=true

# Время жизни сессии (секунды)
SESSION_LIFETIME=3600

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Автоматическое создание таблиц при старте (только для development!)
# В production используйте alembic миграции
AUTO_CREATE_TABLES=false

# Удалять pending updates при старте бота
DROP_PENDING_UPDATES=true

# Включить расширенное логирование SQL запросов (только для development!)
ENABLE_SQL_ECHO=false

# Включить middleware для логирования времени выполнения запросов
ENABLE_REQUEST_TIMING=true

# Включить учет отходов производства
ENABLE_WASTE_TRACKING=true

# Включить резервирование материалов
ENABLE_INVENTORY_RESERVE=true

# ============================================================================
# OPTIONAL: WEBHOOK CONFIGURATION
# ============================================================================
# Используется только если запускаете бота в webhook режиме

# URL вашего сервера (с https://)
# WEBHOOK_URL=https://your-domain.com

# Путь для webhook endpoint
# WEBHOOK_PATH=/bot/webhook

# Порт для webhook сервера
# WEBHOOK_PORT=8443

# ============================================================================
# OPTIONAL: REDIS CONFIGURATION
# ============================================================================
# Для production рекомендуется использовать Redis для хранения FSM состояний

# URL подключения к Redis
# REDIS_URL=redis://localhost:6379/0

# Или раздельные параметры:
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=

# ============================================================================
# OPTIONAL: MONITORING & METRICS
# ============================================================================

# Sentry DSN для отслеживания ошибок
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Включить Prometheus метрики
# ENABLE_METRICS=false

# Порт для Prometheus метрик
# METRICS_PORT=9090

# ============================================================================
# OPTIONAL: EXTERNAL INTEGRATIONS
# ============================================================================

# API ключ для внешней системы учета (если используется)
# EXTERNAL_API_KEY=

# URL внешней системы
# EXTERNAL_API_URL=

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================

# База данных для тестов (используется в pytest)
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_pass@localhost:5432/test_warehouse_db

# Включить debug режим (детальные трейсбэки)
DEBUG=false

# Включить профилирование производительности
ENABLE_PROFILING=false

# ============================================================================
# DOCKER COMPOSE VARIABLES
# ============================================================================
# Эти переменные используются в docker-compose.yml

# PostgreSQL
POSTGRES_USER=warehouse_user
POSTGRES_PASSWORD=warehouse_pass
POSTGRES_DB=warehouse_db
POSTGRES_PORT=5432

# PgAdmin (веб-интерфейс для PostgreSQL)
PGADMIN_EMAIL=admin@warehouse.local
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# ============================================================================
# ПРИМЕРЫ КОНФИГУРАЦИЙ ДЛЯ РАЗНЫХ ОКРУЖЕНИЙ
# ============================================================================

# --- DEVELOPMENT (локальная разработка) ---
# APP_ENV=development
# LOG_LEVEL=DEBUG
# ENABLE_SQL_ECHO=true
# AUTO_CREATE_TABLES=true
# DATABASE_URL=postgresql+asyncpg://warehouse_user:warehouse_pass@localhost:5432/warehouse_db

# --- PRODUCTION (боевой сервер) ---
# APP_ENV=production
# LOG_LEVEL=WARNING
# ENABLE_SQL_ECHO=false
# AUTO_CREATE_TABLES=false
# DATABASE_URL=postgresql+asyncpg://prod_user:STRONG_PASSWORD@db.server.com:5432/warehouse_prod
# REDIS_URL=redis://redis.server.com:6379/0
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# --- TESTING (автоматические тесты) ---
# APP_ENV=test
# LOG_LEVEL=ERROR
# AUTO_CREATE_TABLES=true
# DATABASE_URL=postgresql+asyncpg://test_user:test_pass@localhost:5432/test_warehouse_db

# ============================================================================
# БЕЗОПАСНОСТЬ
# ============================================================================
#
# ⚠️ ВАЖНО:
# 1. НЕ коммитьте .env файл в git
# 2. Используйте сильные пароли для production
# 3. Регулярно обновляйте SECRET_KEY
# 4. Ограничьте доступ к .env файлу (chmod 600 .env)
# 5. Используйте переменные окружения в CI/CD вместо файлов
# 6. Не храните секреты в открытом виде в production
#
# Генерация безопасных значений:
# - SECRET_KEY: openssl rand -hex 32
# - Пароли: openssl rand -base64 24
#
# ============================================================================

# ============================================================================
# ПРОВЕРКА КОНФИГУРАЦИИ
# ============================================================================
#
# После настройки проверьте корректность:
#
# 1. Проверка подключения к БД:
#    psql -h localhost -U warehouse_user -d warehouse_db
#
# 2. Проверка токена бота:
#    curl https://api.telegram.org/bot<YOUR_TOKEN>/getMe
#
# 3. Запуск приложения:
#    python main.py
#
# 4. Проверка логов:
#    tail -f logs/app.log
#
# ============================================================================

# ============================================================================
# ДОПОЛНИТЕЛЬНАЯ ИНФОРМАЦИЯ
# ============================================================================
#
# Документация:
# - aiogram: https://docs.aiogram.dev/
# - SQLAlchemy: https://docs.sqlalchemy.org/
# - PostgreSQL: https://www.postgresql.org/docs/
# - Pydantic Settings: https://docs.pydantic.dev/latest/concepts/pydantic_settings/
#
# Поддержка:
# - GitHub Issues: https://github.com/your-repo/issues
# - Telegram: @your_support_bot
#
# ============================================================================
